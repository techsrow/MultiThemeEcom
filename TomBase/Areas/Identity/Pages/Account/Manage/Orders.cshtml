@page
@model TomBase.Areas.Identity.Pages.Account.Manage.OrdersModel
@{
}

<div class="table-responsive p-3">
    @if (Model.Orders.Any())
    {

        <table id="simpletable" class="table table-striped table-bordered nowrap">
            <thead>
                <tr>
                    <th>Order Id</th>
                    <th >Product Image</th>
                    <th >Product Name</th>
                    <th >Qunantity</th>
                    <th >Price</th>
                    <th >Date</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var order in Model.Orders)
                {
                    foreach (var item in order.OrderProducts)
                    {
                        @if (item != null)
                        {
                            <tr>

                                <td>@order.Id</td>
                                <td><a asp-controller="Products" asp-action="Details" asp-route-id="@item.Product.Id"><img src="@item.Product.Image" height="80" width="80" alt="prod1" /></a></td>
                                <td>@item.Product.Name</td>
                                <td> @item.Quantity</td>
                                <td>@order.Amount</td>
                                <td>@order.Date.ToShortDateString()</td>
                            </tr>
                        }
                    }
                }

            </tbody>
        </table>
    }
</div>


    <link rel="stylesheet" type="text/css" href="/lib/DataTables/DataTables-1.10.20/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="/lib/DataTables/Buttons-1.6.1/css/buttons.dataTables.min.css" />



    <script type="text/javascript" src="/lib/DataTables/DataTables-1.10.20/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="/lib/DataTables/JSZip-2.5.0/jszip.min.js"></script>
    <script type="text/javascript" src="/lib/DataTables/Buttons-1.6.1/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="/lib/DataTables/pdfmake-0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="/lib/DataTables/pdfmake-0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="/lib/DataTables/Buttons-1.6.1/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="/lib/DataTables/Buttons-1.6.1/js/buttons.print.min.js"></script>
    <script src="~/lib/jquery/jquery.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $('#simpletable').DataTable({
                dom: 'lBfrtip',
                buttons: [{
                        extend: 'pdf',
                        title: 'BasePackage1._0',
                        filename: "@DateTime.Now.ToFileTime()",
                        exportOptions: {
                            columns: [ 0, 1, 2]
                        }
                    }, {
                        extend: 'excel',
                        title: 'BasePackage1._0',
                        filename: "@DateTime.Now.ToFileTime()",
                        exportOptions: {
                            columns: [ 0, 1, 2]
                        }
                    }, {
                        extend: 'csv',
                        title: 'BasePackage1._0',
                        filename: "@DateTime.Now.ToFileTime()",
                        exportOptions: {
                            columns: [ 0, 1, 2]
                        }
                    },
                    {
                        extend: 'print',
                        title: 'BasePackage1._0',
                        filename: "@DateTime.Now.ToFileTime()",
                        exportOptions: {
                            columns: [ 0, 1, 2]
                        }
                    }],
                "order": [],
                "columnDefs": [ {
                    "targets"  : 'no-sort',
                    "orderable": false,
                }],

            });

        });

    </script>

